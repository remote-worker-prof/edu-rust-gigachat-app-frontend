# Контракт API (учебная версия)

Документ описывает, как frontend обращается к backend. Текст написан для
новичков и объясняет базовые термины.

## 1. Что такое API

**API** — это набор адресов и правил, по которым клиент (UI) получает
данные с сервера. В нашем проекте клиент — это браузерный UI, а сервер —
`edu-rust-gigachat-app-backend`.

## 2. HTTP‑методы (коротко)

- **GET** — получить данные.
- **POST** — отправить данные.

То есть:
- `GET /health` — «дай состояние сервера».
- `POST /ask` — «прими вопрос и верни ответ».

## 3. Базовый URL

**Базовый URL** — это адрес сервера, к которому добавляются пути эндпоинтов.
В учебной среде обычно используется:

```
http://127.0.0.1:8000
```

В UI этот адрес можно задать через `API_BASE_URL` или через поле в
интерфейсе.

## 4. Формат JSON

**JSON** — это текстовый формат, где данные описываются как пары
«ключ‑значение». Пример JSON:

```json
{
  "question": "Что такое Rust?"
}
```

## 5. Эндпоинты

### 5.1. `GET /`

**Назначение:** вернуть текстовое описание API.

**Ответ:** обычный текст.

### 5.2. `GET /health`

**Назначение:** проверить, доступен ли сервер.

**Пример ответа:**

```json
{
  "status": "ok",
  "version": "0.1.0",
  "gigachat_enabled": true
}
```

**Пояснение полей:**
- `status` — строка состояния (обычно `ok`).
- `version` — версия сервера.
- `gigachat_enabled` — включён ли реальный режим (или mock).

### 5.3. `POST /ask`

**Назначение:** отправить вопрос и получить ответ.

**Пример запроса:**

```json
{
  "question": "Что такое Rust?"
}
```

**Пример ответа:**

```json
{
  "answer": "Rust — это язык программирования...",
  "source": "gigachat",
  "system_prompt_applied": true
}
```

**Пояснение полей:**
- `answer` — текст ответа.
- `source` — источник ответа (`gigachat` или `mock`).
- `system_prompt_applied` — применялся ли системный промпт.

## 6. Ошибки и типовые случаи

- Неверный JSON → HTTP 400.
- Пустой вопрос → JSON с полем `error` (иногда также есть `code`).
- Непредвиденная ошибка сервера → HTTP 500.

Пример сообщения об ошибке:

```json
{
  "error": "Question cannot be empty",
  "code": "EMPTY_QUESTION"
}
```

> Примечание: UI обрабатывает эти ошибки и выводит понятное сообщение.
